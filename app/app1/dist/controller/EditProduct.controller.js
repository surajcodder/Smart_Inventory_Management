sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/MessageToast"],function(e,t,r){"use strict";var a;return e.extend("app1.controller.EditProduct.",{onNavBack:function(){var e=sap.ui.core.UIComponent.getRouterFor(this);e.navTo("Products")},onInit:function(){debugger;var e=this.getOwnerComponent().getRouter();e.getRoute("EditProduct").attachPatternMatched(this._onProductMatched,this);e.getRoute("EditProduct").attachPatternMatched(this._onRouteMatched,this);var r=new t({});this.getView().setModel(r,"productModel")},_onRouteMatched:function(e){var t=e.getParameter("arguments").productId;debugger;if(t){this._loadProductData(t);debugger}},_onProductMatched:async function(e){debugger;var r=this.getView();var o=this.getOwnerComponent().getModel();var n=e.getParameter("arguments").productId;a=n;debugger;var d=o.bindContext("/editProduct(...)");d.setParameter("productsId",n);await d.execute();var i=d.getBoundContext().getValue();console.log(i);var u=new t(i);this.getView().setModel(u,"productModel")},onSaveEditProduct:async function(e){debugger;var t=this.getView();var r=this.getOwnerComponent().getModel();var o=t.byId("inputSupplier1").getSelectedKey();debugger;var n=r.bindContext("/updateProduct(...)");n.setParameter("ID",a).setParameter("name",t.byId("inputProductName").getValue()||"Default Product").setParameter("description",t.byId("inputDescription1").getValue()||"No description").setParameter("category",t.byId("inputCategory1").getValue()||"General").setParameter("price",parseFloat(t.byId("inputPrice1").getValue())||0).setParameter("stockLevel",parseInt(t.byId("inputStockLevel").getValue())||0).setParameter("reorderThreshold",parseInt(t.byId("inputReorderThreshold1").getValue())||0).setParameter("supplier",o);await n.execute();var d=await n.getBoundContext().requestObject();console.log(d);this.onNavBack()},_loadProductData:function(e){var t=this.getView().getModel();var r=this.getView();if(!e){console.error("Product ID is missing!");return}r.bindElement({path:"/Products(ID='"+e+"',IsActiveEntity=true)",parameters:{expand:"supplier"},events:{dataReceived:function(t){var r=t.getParameter("data");if(!r){console.error("Product data not found for ID:",e)}}}})},onDialogClose:async function(e){this.onNavBack()}})});
//# sourceMappingURL=EditProduct.controller.js.map