sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast"],function(e,t){"use strict";return e.extend("app1.controller.AddSales",{onNavBack:function(){var e=sap.ui.core.UIComponent.getRouterFor(this);e.navTo("Products")},onInit:function(){console.log("Sales Page Loaded")},onSaveSale:async function(e){debugger;var a=this.getView();var r=this.getOwnerComponent().getModel();var n=a.byId("inputProduct").getSelectedKey();if(!n){t.show("Please select a Product.");return}var s=a.byId("inputCustomer").getSelectedKey();if(!s){t.show("Please select a Customer.");return}var o="$auto";var u=a.byId("inputSaleDate").getValue();if(u){u=new Date(u).toISOString().split("T")[0]}var i=r.bindContext("/addSales(...)");i.setParameter("product",n).setParameter("quantity",parseInt(a.byId("inputQuantity").getValue())||1).setParameter("unitPrice",parseFloat(a.byId("inputUnitPrice").getValue())||0).setParameter("saleDate",u).setParameter("customer",s).setParameter("paymentMethod",a.byId("inputPaymentMethod").getSelectedKey()||"Cash").setParameter("status",a.byId("inputStatus").getSelectedKey()||"Pending");console.log("Sending Sales Data:",JSON.stringify({product:n,quantity:a.byId("inputQuantity").getValue(),unitPrice:a.byId("inputUnitPrice").getValue(),saleDate:a.byId("inputSaleDate").getValue(),customer:s,paymentMethod:a.byId("inputPaymentMethod").getSelectedKey(),status:a.byId("inputStatus").getSelectedKey()},null,2));try{await i.execute();var l=await i.getBoundContext().requestObject();console.log("New Sales Record Created:",l);t.show("Sales record saved successfully!");this.onNavBack()}catch(e){console.error("Error while saving sales record:",e);t.show("Failed to save sales record. Please try again.")}}})});
//# sourceMappingURL=AddSales.controller.js.map